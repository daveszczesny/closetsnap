import{l as I}from"./auth_signout-21f4fc8a.js";import{g as f}from"./db_read_user-32782da2.js";import{d,g as A,i as Q,j as h,r as g,k as F,_ as v,o as C,c as E,e as a,t as S,f as B,F as U}from"./index-70dbdd3e.js";const D={data(){return{auth:!1,name:"",emptyCloset:!0,editMode:!1}},async mounted(){var e;d().onAuthStateChanged(t=>{t?(this.auth=!0,console.log("Logged in"),f("name").then(o=>{this.name=o})):(console.log("Logged out"),this.auth=!1,this.$router.push("/Login"))});const s=`users/${(e=d().currentUser)==null?void 0:e.email}/`;await this.loadClothingItems(A(),s)},methods:{async loadClothingItems(s,e){const t=document.getElementById("closetDiv"),o=t==null?void 0:t.querySelectorAll("div");(await this.listPrefixInFolder(s,e)).forEach(async i=>{const l=await this.listItemsInFolder(s,i.fullPath),{folderDiv:c,imgDiv:m}=await this.createFolderContainer(i.name);l.forEach(y=>{Q(y).then(p=>{const u=this.createImageElement(p),r=document.createElement("div");r.classList.add("closet-custom-loader"),c.appendChild(r),m.appendChild(u),this.showImages(u,r)})}),c.appendChild(m),t.appendChild(c)}),setTimeout(()=>{o.item.length<1?this.emptyCloset=!0:this.emptyCloset=!1},1e3)},showImages(s,e){s.complete?(s.style.visibility="visible",e.style.display="none"):s.onload=()=>{s.style.visibility="visible",e.style.display="none"}},createImageElement(s){const e=document.createElement("img");return e.setAttribute("src",s),e.setAttribute("loading","lazy"),e.setAttribute("visibility","hidden"),e.classList.add("item"),e.style.width=`${window.innerWidth*.95}px`,e.style.height=`${window.innerWidth*.95}px`,e.addEventListener("click",async()=>{var t;if(this.editMode&&window.confirm("Are you sure you want to delete this image")){await this.deleteImage(s);const n=document.getElementById("closetDiv");n.innerHTML="";const i=`users/${(t=d().currentUser)==null?void 0:t.email}/`;await this.loadClothingItems(A(),i)}}),e},async listPrefixInFolder(s,e){try{return(await h(g(s,e))).prefixes}catch(t){return console.log(t),alert("Error occured whilst grabbing your clothes... Try again"),[]}},async listItemsInFolder(s,e){try{return(await h(g(s,e))).items}catch(t){return console.log(t),alert("Error occured whilst grabbing your clothes... Try again"),[]}},async createFolderContainer(s){const e=document.createElement("div");e.classList.add("folder-container");const t=document.createElement("div");t.classList.add("image-container");const o=document.createElement("div");o.classList.add("image-title-container");const n=document.createElement("p");return n.innerHTML=s,o.appendChild(n),e.appendChild(o),{folderDiv:e,imgDiv:t}},async deleteImage(s){const e=A(),t=g(e,s);try{await F(t),console.log("Imaged deleted")}catch{console.log("Error deleting image")}},authLogOut(){I()},addToCloset(){this.$router.push("AddCloset")},toggleEdit(){this.editMode=!this.editMode;const e=document.getElementById("closetDiv").querySelectorAll("img");this.editMode?e.forEach(t=>{t.classList.add("item-alt"),t.classList.remove("item")}):e.forEach(t=>{t.classList.add("item"),t.classList.remove("item-alt")})}}},O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMuSURBVHgB7Zq9ctNAFIWvLQo6/1SUxnZP0qXD6SjhCQglHX6COE+AWypCSUXooMLp6HAewLbS0VmUNDbnQDxkHDnZ1a6kXWW/GY+VaDUefXP37r0riQQCgUAgEAgEAoGAdWriOZ1OpxlF0WC9Xu/x71qtNp3NZmdiCa8F9Xq9lxAzxmFz61QMUSOI+iCGROIp3W73GF+U8zDlNIU9b7Vaslwuz8UALwVdyRkpDB2YSvJOkIacDUaSvBKUQc6GzJK8EWQgZ8Og3W7HkHShc5EXq5gFORuS1Wr1OI7jRPWCujiORTmEq9tTnQucFoQicCD25PylXq/va40Xh8FUmKAQnEqJOD/FIOiVWAQ56IfOeOdXsSRJfmKJ/oXDZ2JOvFgsXutc4HwEkfl8PkYkGfdV7M9EE2cEcbXC5+2u8xD0xjAfnWRpXp2og64v5cgRL5CcU7crsKp1EAXf8OmIHieIwpFkoHRBKXUOi7l9SIrTxmeQlFkOKXWK7SgCm7j5T9wIS7uG4jDVDhWnm5EcUtoqdluFDEGP+EHf9DntfPKPdy12oCIH6b9gLoeUIkixfdjD/Tch6euuATj35aoEoKTrG2dW5JDCBWn2Vgd3bVPg3PdGo/ERhy1EHfelrckhhSZpg8ZzjJse3jWIvRvbE7FIYYJMu3Ik5TO2HTpbFTYoRJDFLYsYJcDhrhIgD3LPQbb3c5BnjpCXfjP3SAHkGkGW5Wxzimga5j3lcisUc5ZDLovIR7lEUAFyrC7lt2FdUJXkEKuCqiaHWBNURTnEiqCqyiHGgqoshxgJqrocklnQfZBDMgm6L3KItiBsKRzh8e17yQ9n5BDtVgPN4rHkh1NyiJagfr8/yPDIRRXn5BAtQeieB5IPTsohWoIQPVrv1ijirByiJWjzsrZFnJZDlAXxiabcfGHbBOflEGVBURTZjB4v5BBlQRanlzdyiLIgSwnaKzmkyAjyTg5REmQhQXsphzxQGcQEjQiSDCSYmsPZbHYqnqIkSHV6YVyMrymkTFB1X9h+Tl4GqoKe4Ka3/xfLfxmXOJ4U/dy8CJQEQcI5p1jVZQQCgUAgEAgEAsr8AW+OjtrPUiOYAAAAAElFTkSuQmCC",L="data:image/png;base64,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",w="/assets/sad-5f48ee11.png";const k={class:"closet-title"},V={class:"closet-title-img"},Z={class:"closet-circle"},b=a("div",{id:"closetDiv",class:"closetDiv"},null,-1),K={key:0,class:"closet-empty"},X=a("img",{src:w},null,-1),x=[X];function z(s,e,t,o,n,i){return C(),E(U,null,[a("div",k,[a("h1",null,S(n.name)+"'s Closet",1),a("div",V,[a("img",{onClick:e[0]||(e[0]=(...l)=>i.toggleEdit&&i.toggleEdit(...l)),src:O})])]),a("div",Z,[a("img",{onClick:e[1]||(e[1]=(...l)=>i.addToCloset&&i.addToCloset(...l)),src:L})]),b,n.emptyCloset==!0?(C(),E("div",K,x)):B("v-if",!0)],64)}const H=v(D,[["render",z],["__file","/home/dave/Documents/VueFleet/vue-project/src/pages/Closet.vue"]]);export{H as default};
