import{g as h,r as g,l as p,b as f,d as _,_ as m,o as y,c as S,e as t,t as r,f as b,F as v,p as w,h as B}from"./index-22b3cc09.js";import{l as x}from"./auth_signout-5720cb83.js";async function i(e){const o=h();try{const s=g(o,e),c=await p(s);let a=0;for(const l of c.items){const n=await f(l);a+=n.size}for(const l of c.prefixes){const n=l.fullPath,u=await i(n);a+=u}return a}catch(s){return console.error("Error calculating bytes in folder: ",s),0}}const A={data(){return{auth:!1,email:null,totalBytesUsed:0,bytesToMb:1e6,allowedStorageSpace:512,percentageUsedSpace:0}},methods:{logout(){x()}},async mounted(){_().onAuthStateChanged(async e=>{if(e){this.auth=!0,console.log("Signed in"),this.email=e.email;const o="users/"+this.email;console.log(o),await i(o).then(s=>{if(s==null)return;console.log("Total Bytes used by user: ",s),this.totalBytesUsed=Math.round(s/this.bytesToMb),this.percentageUsedSpace=this.totalBytesUsed/this.allowedStorageSpace*100;const c=document.querySelector(".used-space");c.style.width=this.percentageUsedSpace+"%"})}else this.auth=!1,this.$router.push("/Login")})}};const d=e=>(w("data-v-c5663b54"),e=e(),B(),e),U={class:"account-heading"},F=d(()=>t("h1",null,"Hi there!, you're signed in under ",-1)),I={style:{"font-size":"large","margin-left":"1vh","margin-top":"0.5vh"}},M=d(()=>t("div",{class:"storage"},[t("div",{class:"storage-bar"},[t("div",{class:"used-space"})])],-1)),P={class:"storage-text"};function T(e,o,s,c,a,l){return y(),S(v,null,[t("div",U,[F,t("h1",I,r(a.email),1)]),M,t("div",P,[t("p",null,r(a.totalBytesUsed)+" / "+r(a.allowedStorageSpace)+" mb used",1)]),b(" Account overview section "),t("button",{class:"logout-button",onClick:o[0]||(o[0]=(...n)=>l.logout&&l.logout(...n))},"Log out")],64)}const C=m(A,[["render",T],["__scopeId","data-v-c5663b54"],["__file","/home/dave/Documents/VueFleet/vue-project/src/pages/Account.vue"]]);export{C as default};
